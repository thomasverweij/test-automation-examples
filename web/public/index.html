<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Automation Examples</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body class="page-light">
    <div class="container dashboard">
        <header class="header">
            <h1>üß™ Test Automation Examples</h1>
            <div class="user-info">
                <div class="user-details">
                    <div class="user-name" id="authUserLabel">Welcome</div>
                    <small class="muted" id="authStatusLabel">You are logged in</small>
                </div>
                <a href="/login" class="primary-link" id="loginBtn">Login</a>
                <a href="/logout" class="logout-btn hidden" id="logoutBtn">Logout</a>
            </div>
        </header>

        <div id="authSection" class="auth-section" style="margin-bottom: 20px; text-align: left;">
            <p><strong>Demo Credentials</strong></p>
            <p>üë§ user1 / password1 (requires 2FA)</p>
            <p>üë§ user2 / password2 (no 2FA)</p>
            <p class="note-text">Note: 2FA codes are logged to the server console for testing</p>
        </div>

        <div class="section">
            <h2 class="section-title dashboard">API Testing Examples</h2>
            <div class="card">
                <h3>üîå API Endpoints</h3>
                <p>Test various API scenarios including reliable, unreliable, and slow endpoints.</p>
                <a href="/api-examples.html" class="primary-link">View API Examples ‚Üí</a>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title dashboard">Locator Examples</h2>
            
            <div class="card">
                <h3>üìå CSS Selectors</h3>
                <p>Examples of locating elements using ID, class, attribute, and descendant selectors.</p>
                <a href="/css-selectors.html" class="primary-link">View CSS Examples ‚Üí</a>
            </div>

            <div class="card">
                <h3>üîç XPath Selectors</h3>
                <p>Examples of XPath locators including text, attribute, position, and complex queries.</p>
                <a href="/xpath-selectors.html" class="primary-link">View XPath Examples ‚Üí</a>
            </div>

            <div class="card">
                <h3>‚ôø Role-Based Selectors</h3>
                <p>Accessibility-focused examples using ARIA roles for buttons, links, textboxes, and more.</p>
                <a href="/role-selectors.html" class="primary-link">View Role Examples ‚Üí</a>
            </div>

            <div class="card">
                <h3>üìù Text-Based Selectors</h3>
                <p>Find elements using exact text, partial text, labels, and heading text.</p>
                <a href="/text-selectors.html" class="primary-link">View Text Examples ‚Üí</a>
            </div>

            <div class="card">
                <h3>‚ö° Dynamic Elements</h3>
                <p>Test auto-waiting scenarios with delayed elements, state changes, and dynamic content.</p>
                <a href="/dynamic-elements.html" class="primary-link">View Dynamic Examples ‚Üí</a>
            </div>

            <div class="card">
                <h3>üîç Product Search</h3>
                <p>Search through a list of products with real-time filtering and results display.</p>
                <a href="/search.html" class="primary-link">View Search Examples ‚Üí</a>
            </div>
        </div>
    </div>

    <script>
        // Basic auth state probe using /auth/status
        (async () => {
            const loginBtn = document.getElementById('loginBtn');
            const logoutBtn = document.getElementById('logoutBtn');
            const authUserLabel = document.getElementById('authUserLabel');
            const authStatusLabel = document.getElementById('authStatusLabel');
            const authSection = document.getElementById('authSection');

            try {
                const resp = await fetch('/auth/status', { credentials: 'include' });
                const data = await resp.json();
                if (data.authenticated) {
                    const displayName = data.name || data.userId || 'Authenticated user';
                    logoutBtn.classList.remove('hidden');
                    loginBtn.classList.add('hidden');
                    authUserLabel.textContent = displayName;
                    authStatusLabel.textContent = 'You are logged in';
                    authSection.innerHTML = `<strong>‚úÖ Logged in as ${displayName}</strong>`;
                } else {
                    logoutBtn.classList.add('hidden');
                    loginBtn.classList.remove('hidden');
                    authUserLabel.textContent = 'Welcome';
                    authStatusLabel.textContent = 'You are not logged in';
                    authSection.innerHTML = `
                        <p><strong>Demo Credentials</strong></p>
                        <p>üë§ user1 / password1 (requires 2FA)</p>
                        <p>üë§ user2 / password2 (no 2FA)</p>
                        <p class="note-text">Note: 2FA codes are logged to the server console for testing</p>
                    `;
                }
            } catch (e) {
                logoutBtn.classList.add('hidden');
                loginBtn.classList.remove('hidden');
                authUserLabel.textContent = 'Welcome';
                authStatusLabel.textContent = 'You are not logged in';
                authSection.innerHTML = `
                    <p><strong>Demo Credentials</strong></p>
                    <p>üë§ user1 / password1 (requires 2FA)</p>
                    <p>üë§ user2 / password2 (no 2FA)</p>
                    <p class="note-text">Note: 2FA codes are logged to the server console for testing</p>
                `;
            }
        })();
    </script>
</body>
</html>
